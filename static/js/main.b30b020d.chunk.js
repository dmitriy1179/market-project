(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t){e.exports="data:image/png;base64,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"},28:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAPFBMVEX///+AgIB9fX2Li4t5eXn8/PyYmJfp6enw8PD5+fmFhYXR0dHc3NypqanBwcCcnJzLy8uRkZGioqKzs7K2WSmmAAAFLUlEQVR4nO2d25qqMAxGpRSRM8j7v+suIuPGUWyaQBMn627myv9LmlNLezopiqIoiqIoiqIoiqIoiqIoiqL8QYo7sX8HPUXdj9fB2AdpN/b1lygt6nFwkowxyX+4P90/h6YSr7JuSrvWttZpk67KYv9IBH1q36r7UWmTVqohq+SzvhvWtBLteOmsl7xZY1rH/r1g+ver77WvjrF/MZARYMC7Gc+iPLUBC3RmHAQFnBCBoiS2QQKdxHPsX+5JFSjQrUUZ4eYSqm+SKCJpXEFpYo1JBQTUOthHb0ZsY//+z6QIE05WZB9Pw8PM3Yjsg82AM6GTyHwl5kgTOoV9bA3bjFgTusomtoZNMmScuUm8xFaxBd5JubtpaEW6smEXW8UWHd5Jk6TknBIJ9Dk3zWPLeM+FwEl5L0RsQTNjGJc1FIHGKbzG1vGehiLQsM75ZxKFieFbmpYkAhPLN12QLEPO6SKjUsh2WlOoQvEKKTqLm8IqtpJ3kClkW7Z9vw2/fx2qQvkKv7+mOdEU3onlO21LiRTy7S2IuqeEr8Lv74BbGoWMB6Y9zZymia3jPbj93x+FjPeBiealbMtS1+STrEPGCZ9gB/gG30EUTbowA990SLS7xnjkTRNMOYdSF0wJvJRzKHXBlCDUGM6hFHeo7U4ZW8M2+LqNd6D5CyeGMqxA3hXNBPo0ho2t4BPYhci5dZrBthe8s+EN5D4w4znbAu50ooQPEr7/nHeGclP2uWIC0yNyHiQ+wLgp785pIUPM9kU4KSaaynBSTPXNver+IbgNZnzca01obcq/Jl0IHQwz3t1+JizWSKjYFsJGbgLaigdBA6mS86z7mZC6RkLR/R8BwwwT+zfDgGd9YSYMOZYhaRVOQI0opmB7AGsTRXym/gQsJ4rKhQuQ3VLOR2g2AHwxK2CG+Ar/tC8uUyz4XjQkpbX/jfeX3TKmM6/IvRRy3xPdxOuwoqS+8Bde8wy5y/Dk2+yz/jz9A35NFPPzJVt4jr9Flmwzng0G58/TP+BZmkpsLO74ZnxBg9I13lcsSM2Ihae+RGqsySCjGokJowbtQJlE2pwm7zzvEH446iAp3FRnqL7JjHYQshrztgzQN2ssW/bjjLwdAuXNWNNxvqb90g4GpW82JNdr2i9tatHyFpGWnSXz9kwlbxFprnxE5hTO+UpkyUJk0Q+01luLNE3cLFlU3X7yFpHJGK2iqxvfxw+wIoc+QposWo+3K+g0JteDvbW+7u2dv0WWxz30kVW4uiUUa45ZkYe65xPG7u+sWXtMdHmv8byrxqK1RBe0oDTu56tVGV3fhPPVfTTWZxb6JowZ6eNq1kRdf8/Qz3WqhJO+CXsmrXPgT//sjzF0ZswGhgIdlmp7/FJy89AFk5IEnILgrvy9MCXFYqS5r2QnKKwY9jrVYeC3rWiuftoR7LMtmMebDgK5M0fy2MHeYJYizUX5O4M6NRb7x/uBOAZA8xLA7oQfGyuIbpHfneBgwz5TLIQakeJpo4MINKKIQDoTeNaf4M6nwwg67E91s/MhBF1VICbO3Ai5IYzqUuBjCLiNQZSTBn2UIiiSTgT0ifiXDI8Ffhye9fDiBeDyW0DruwacL2iudT4QcJcopHF6AD4OT3OB/JFAr36Rle8ngKFGTPP7APi9u7CKZgIYTKkeNjoQYDAVVrNNAEcZslqnGVgDRfMWx7HAbq+VVndPwBKivIQPVSgv4UPbfFXIEVW4JjXygCm8pvIoBX6lqSiKoiiKoiiKoiiKoiiKoijKn+IfVxtVXIL8SzUAAAAASUVORK5CYII="},42:function(e,t,a){e.exports=a.p+"static/media/exchange1.9dc251b4.png"},45:function(e,t,a){e.exports=a(59)},50:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(29),c=a.n(s),l=(a(50),a(11)),o=a(14),i=a(44),u=a(12),m=a(19),d=a(7),p="".concat("https://cors-anywhere.herokuapp.com/","http://marketplace.asmer.fs.a-level.com.ua/graphql"),g=new d.GraphQLClient(p),f=localStorage.getItem("token");null!==f&&(console.log("token",f),g.setHeader("Authorization","Bearer ".concat(localStorage.getItem("token"))));var b=g,v=function(e){var t=e.children,a=e.dispatch,n=e.redirectTo,s=e.isAuth,c=e.token,l=Object(i.a)(e,["children","dispatch","redirectTo","isAuth","token"]);s&&localStorage.getItem("token")!==c&&localStorage.setItem("token",c);try{var u=Object(m.a)(localStorage.getItem("token"),{header:!0});console.log("decodedHeader",u)}catch(d){return localStorage.removeItem("token"),b.setHeader("Authorization",null),a({type:"user/logout"}),r.a.createElement(o.a,{to:"/login"})}return console.log("isAuth",s),r.a.createElement(o.b,Object.assign({},l,{render:function(e){var a=e.location;return s?t:r.a.createElement(o.a,{to:{pathname:n,state:{from:a}}})}}))};v.defaultProps={redirectTo:"/"};var y=Object(u.b)(function(e){return{isAuth:e.auth.isLoggedIn,token:e.auth.token}})(v),h=a(4),E=a.n(h),x=a(13),j=a(5),w=a(8),N=a(28),O=a.n(N),k=function(){return r.a.createElement("div",{className:"spinner-border mt-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))},S=function(e){var t=e.status,a=e.noData,n=e.redirectTo,s=e.content,c=e.children;return"searching"===t?r.a.createElement(k,null):a?r.a.createElement("span",{className:"text-info"},s):"rejected"===t?r.a.createElement("span",{className:"text-danger"},"Something went wrong"):"idle"===t?null:"resolved"===t?c:"deleted"===t?r.a.createElement(o.a,{to:{pathname:n}}):void 0};S.defaultProps={noData:!1,content:"No Data"};var A=S;function q(){var e=Object(w.a)(["\n  mutation deleteAccount($id: String) {\n    UserDelete(user: {\n      _id: $id\n     }) {\n      _id\n    }\n  }\n"]);return q=function(){return e},e}function C(){var e=Object(w.a)(["\n  query userFind($query: String) {\n    UserFind(query: $query) {\n      _id\n      createdAt\n      login\n      nick\n      avatar {\n        _id\n        url\n      }\n      incomings {\n        _id\n        owner {\n          _id\n        }\n      }\n      phones\n      addresses \n    }\n  }\n"]);return C=function(){return e},e}var D=Object(d.gql)(C()),I=Object(d.gql)(q()),F=Object(u.b)(function(e){return{token:e.auth.token}})(function(e){var t=e.dispatch,a=e.token,n=Object(m.a)(a).sub.id,s=r.a.useState(null),c=Object(j.a)(s,2),o=c[0],i=c[1],u=r.a.useState("idle"),d=Object(j.a)(u,2),p=d[0],g=d[1],f=function(){var e=Object(x.a)(E.a.mark(function e(a){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,g("searching"),e.next=5,b.request(I,{_id:n});case 5:r=e.sent,console.log("resDel",r),localStorage.removeItem("token"),b.setHeader("Authorization",null),t({type:"user/logout"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),g("rejected");case 15:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect(function(){!function(){try{g("searching"),b.request(D,{query:JSON.stringify([{_id:n}])}).then(function(e){console.log("res",e),i(e.UserFind[0]),g("resolved")})}catch(e){g("rejected")}}()},[]),console.log(o,"result",null!==o&&0!==o.length),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement(A,{noData:null!==o&&0===o.length,status:p},null===o?null:r.a.createElement("div",{className:"border rounded my-5 mx-auto w-75 p-3 d-flex bg-light"},r.a.createElement("div",{className:"mr-3 align-self-center",style:{width:"400px",height:"300px"}},null===o.avatar?r.a.createElement("img",{src:O.a,className:"rounded w-100 h-100",alt:"picture"}):r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(o.avatar.url),className:"rounded w-100 h-100",alt:"picture",style:{objectFit:"fill"}})),r.a.createElement("div",{className:"w-100 d-flex flex-column border rounded bg-white",style:{fontSize:"2rem"}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"mt-1 ml-3"},"Login:"),r.a.createElement("div",{className:"mt-1 mx-2 font-italic"},o.login)),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"ml-3"},"Nick:"),r.a.createElement("div",{className:"mx-2 font-italic"},o.nick)),r.a.createElement("div",{className:"d-flex",style:{fontSize:"1.5rem"}},r.a.createElement("div",{className:"ml-3"},"Phones:"),r.a.createElement("div",{className:"font-italic text-justify text-break mr-2"},null===o.phones?null:0===o.phones.length?null:o.phones.map(function(e,t){return 0===t?r.a.createElement("span",{key:t,className:"ml-2"},e):r.a.createElement("span",{key:t,className:"ml-1"},", ",e)}))),r.a.createElement("div",{className:"d-flex",style:{fontSize:"1.5rem"}},r.a.createElement("div",{className:"ml-3"},"Addresses:"),r.a.createElement("div",{className:"font-italic text-justify text-break mr-2"},r.a.createElement("ul",null,null===o.addresses?null:0===o.addresses.length?null:o.addresses.map(function(e,t){return t===o.addresses.length-1?r.a.createElement("li",{key:t,className:"ml-2 text-break"},e):r.a.createElement("li",{key:t,className:"ml-2 text-break"},e,";")})))),r.a.createElement("div",{className:"d-flex",style:{fontSize:"1rem"}},r.a.createElement("div",{className:"ml-3"},"Account created:"),r.a.createElement("div",{className:"ml-2 font-italic"},new Date(o.createdAt/1).toLocaleDateString())),r.a.createElement("div",{className:"d-flex justify-content-end flex-grow-1 m-2 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm mr-3",onClick:f},"Delete Account"),r.a.createElement(l.b,{to:"/profile/edit/".concat(n),className:"btn btn-outline-secondary btn-sm",role:"button"},"Add/change profile's data"))))))}),M=a(15),P=a(2),U=function(e){var t=e.dispatch,a=r.a.useState({}),n=Object(j.a)(a,2),s=n[0],c=n[1],l=function(e){var t=e.target;c(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))})};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({type:"registration/request",payload:s})}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Login"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Login",name:"login",onChange:l,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",onChange:l,required:!0}))),r.a.createElement("button",{className:"btn btn-primary"},"Create"))},_=function(e){var t=e.dispatch,a=r.a.useState({}),n=Object(j.a)(a,2),s=n[0],c=n[1],l=function(e){var t=e.target;c(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))}),console.log("values",s)};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({type:"login/request",payload:s})}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Login"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Login",name:"login",onChange:l,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",onChange:l,required:!0}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Enter"))},z=function(e){var t=e.dispatch,a=r.a.useState({}),n=Object(j.a)(a,2),s=n[0],c=n[1],l=function(e){var t=e.target;c(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))})};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(s),t({type:"changePassword/request",payload:s})}},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Login"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Login",name:"login",onChange:l,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Password"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",onChange:l,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"New password"),r.a.createElement("div",{className:"col-sm-10 mt-2"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"New password",name:"newPassword",onChange:l,required:!0}))),r.a.createElement("button",{className:"btn btn-primary"},"Change"))},G=Object(u.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,isNewUser:e.auth.isNewUser,authStatus:e.auth.status}})(function(e){var t=e.dispatch,a=e.authStatus,n=e.isNewUser;return"resolved"===a?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("h1",{className:"m-3"},"auth"===n?"Authorization":null,"reg"===n?"Registration":null,"chng"===n?"Change password":null),r.a.createElement("div",{className:"col-sm-12 col-md-5 mx-auto"},"auth"===n?r.a.createElement(_,{dispatch:t}):null,"reg"===n?r.a.createElement(U,{dispatch:t}):null,"chng"===n?r.a.createElement(z,{dispatch:t}):null),r.a.createElement("div",{className:"my-3"},"pending"===a?r.a.createElement(k,null):null),r.a.createElement("div",{className:"my-5"},"rejected"===a?r.a.createElement("span",{className:"alert alert-danger mb-0"},"Something went wrong"):null),r.a.createElement("div",{className:"my-5"},"notRegistered"===a?r.a.createElement("span",{className:"alert alert-warning mb-0"},"You entered an incorrect password or login or you are not registered, please enter the correct data or register"):null),r.a.createElement("div",{className:"my-5"},"isRegistered"===a?r.a.createElement("span",{className:"alert alert-info mb-0"},"The user with the specified data is registered"):null),r.a.createElement("div",{className:"my-5"},"registered"===a?r.a.createElement("span",{className:"alert alert-primary mb-0"},"You are registered, please log in"):null),r.a.createElement("div",{className:"my-5"},"notChanged"===a?r.a.createElement("span",{className:"alert alert-warning mb-0"},"You entered an incorrect data"):null),r.a.createElement("div",{className:"my-5"},"changed"===a?r.a.createElement("span",{className:"alert alert-primary mb-0"},"Your password has been successfully changed"):null))}),Y=a(23),R=a.n(Y),B=function(e){e._id;var t=e.images,a=e.title,n=e.createdAt,s=e.price,c=e.owner,l=e.children;return r.a.createElement("li",{className:"border rounded my-3 mx-auto w-75 p-3 d-flex"},r.a.createElement("div",{style:{width:"170px",height:"120px"}},null===t||0===t.length?r.a.createElement("img",{src:R.a,className:"img-fluid rounded w-100 h-100",alt:"picture",style:{objectFit:"cover"}}):null===t[0].url?r.a.createElement("img",{src:R.a,className:"img-fluid rounded w-100 h-100",alt:"picture",style:{objectFit:"cover"}}):r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(t[0].url),className:"img-fluid rounded w-100 h-100",alt:"picture",style:{objectFit:"cover"}})),r.a.createElement("div",{className:"d-flex flex-column flex-grow-1 mx-3"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"font-weight-bolder",style:{fontSize:"22px"}},a),r.a.createElement("div",{style:{fontSize:"20px"}},"".concat(s," \u0433\u0440\u043d."))),r.a.createElement("div",{className:"align-self-start",style:{fontSize:"14px"}},"Owner: ",c.nick||c.login),r.a.createElement("div",{className:"align-self-start",style:{fontSize:"12px"}},"Posted: ",new Date(n/1).toLocaleDateString()),r.a.createElement("div",{className:"d-flex justify-content-end flex-grow-1 align-items-end"},l)))},T=Object(u.b)(function(e){return{adsData:e.ads.adsData,adsCount:e.ads.adsCount,status:e.ads.status,skip:e.ads.skip}})(function(e){var t=e.dispatch,a=e.adsData,n=e.adsCount,s=e.status,c=e.skip,o=r.a.useState(null),i=Object(j.a)(o,2),u=i[0],m=i[1],d=r.a.useState(10),p=Object(j.a)(d,2),g=p[0],f=p[1],b=function(){t({type:"adsFind/request",payload:{value:u,skip:c,limit:g}})};return r.a.useEffect(function(){return b(),function(){return t({type:"findRequest/reset"})}},[g]),console.log(a,"adsData",null!==a&&0!==a.length),console.log("count",n),console.log("skip",c),console.log("limit",g),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("div",{className:"row input-group m-3 mx-auto w-50"},r.a.createElement("label",{className:"col-sm-6 col-form-label"},"Select the number of ads on the page"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{className:"form-control",onChange:function(e){f(+e.target.value),t({type:"skip/reset"})},name:"select"},r.a.createElement("option",{key:10,value:10},"10"),r.a.createElement("option",{key:20,value:20},"20"),r.a.createElement("option",{key:30,value:30},"30"),r.a.createElement("option",{key:50,value:50},"50"),r.a.createElement("option",{key:100,value:100},"100")))),r.a.createElement("div",{className:"row input-group m-3 justify-content-md-center"},r.a.createElement("input",{type:"search",className:"form-control col-5",onChange:function(e){m(e.target.value)},placeholder:"Enter ad"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",type:"submit",onClick:function(){t({type:"skip/reset"}),b()},disabled:"searching"===s},"Search Ad"))),r.a.createElement("div",{className:"col-sm-12 my-3"},r.a.createElement(A,{noData:null!==a&&0===a.length,status:s},r.a.createElement("ul",null,null===a?null:a.map(function(e){return r.a.createElement(B,Object.assign({key:e._id},e),r.a.createElement(l.b,{to:"/ads/otherUser/".concat(e.owner._id),className:"btn btn-secondary btn-sm mr-2",role:"button"},"View other ads this user"),r.a.createElement(l.b,{to:"/ad/otherUser/".concat(e._id),style:{width:"70px"},className:"btn btn-outline-secondary btn-sm",role:"button"},"View"))})),r.a.createElement("div",{className:" d-flex justify-content-between w-75 mx-auto"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(c<g?{type:"skip/reset"}:{type:"skip/setPrev",payload:g}),b()},disabled:0===c},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(n<=g?{type:"skip/reset"}:{type:"skip/setNext",payload:g}),b()},disabled:c+g>=n},"Next")))))}),L=a(21),J=a(24);a(34);function K(){var e=Object(w.a)(["\n  mutation post($title: String!, $description: String, $images: [ImageInput], $tags: [String], $address: String, $price: Float!) {\n    AdUpsert(ad: {\n      title: $title,\n      description: $description,\n      images: $images,\n      tags: $tags\n      address: $address,\n      price: $price\n    }) {\n      _id\n    }\n  }\n"]);return K=function(){return e},e}var V=Object(d.gql)(K()),Q=Object(u.b)(function(e){return{arrImages:e.images.arrImages,status:e.images.status}})(function(e){var t=e.dispatch,a=e.arrImages,n=e.status,s=r.a.useState({tags:["sport","entertainment","health","antiques","technology"],images:[]}),c=Object(j.a)(s,2),l=c[0],i=c[1],u=r.a.useState(!1),m=Object(j.a)(u,2),d=m[0],p=m[1],g=function(e){var t=e.target;"price"===t.name?i(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,+t.value))}):i(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))}),console.log("values",l)};return r.a.useEffect(function(){return function(){return t({type:"request/reset"})}},[]),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==a.length&&(a.forEach(function(e){var t=e._id;console.log("imageId",{_id:t}),l.images.push({_id:t})}),console.log("images",l.images));try{t({type:"request/pending"}),b.request(V,l).then(function(e){console.log("res",e),t({type:"request/resolved"})})}catch(e){t({type:"request/rejected"})}},className:"col-8 mx-auto mt-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Title *"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Title",name:"title",onChange:g,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Description"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{className:"form-control",placeholder:"Description",name:"description",onChange:g}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"ImageInput"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"file",className:"form-control-file",placeholder:"ImageInput",name:"imageInput",onChange:function(e){t({type:"getArrImages/request",payload:e.target.files})},disabled:"searching"===n,multiple:!0})),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap ml-3"},null===a||0===a.length?null:a.map(function(e,s){return null===e.url?null:r.a.createElement("div",{key:s,className:"mt-3 col-3 w-100 mx-auto px-3"},r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(e.url),className:"img-fluid rounded w-100 h-100",alt:"picture"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm my-3",disabled:"searching"===n,onClick:function(){return e=s,a.splice(e,1),t({type:"arrImages/formed",payload:a}),void p(!d);var e}},"Delete")))}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Tags"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(J.a,{tags:l.tags,onChange:function(e){return function(e){i(function(t){return Object(P.a)(Object(P.a)({},t),{},{tags:Object(L.a)(e)})}),console.log("values",l)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Address"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Address",name:"address",onChange:g}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Price *"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Price",name:"price",onChange:g,required:!0}))),r.a.createElement("button",{className:"btn btn-secondary",disabled:"searching"===n},"Post ad")),r.a.createElement(A,{status:n},r.a.createElement(o.a,{to:"/ad/curUser"})))}),H=Object(u.b)(function(e){return{adsData:e.ads.adsData,adsCount:e.ads.adsCount,status:e.ads.status,skip:e.ads.skip,token:e.auth.token}})(function(e){var t=e.dispatch,a=e.adsData,n=e.adsCount,s=e.status,c=e.skip,o=e.token,i=Object(m.a)(o).sub.id,u=r.a.useState(!1),d=Object(j.a)(u,2),p=d[0],g=d[1],f=r.a.useState(10),b=Object(j.a)(f,2),v=b[0],y=b[1],h=r.a.useState(null),E=Object(j.a)(h,2),x=E[0],w=E[1],N=function(){t({type:"adsUserFind/request",payload:{value:x,id:i,skip:c,limit:v}})};return r.a.useEffect(function(){return N(),function(){return t({type:"findRequest/reset"})}},[p,v]),console.log(a,"result",null!==a&&0!==a.length),console.log("skip",c),console.log("limit",v),console.log("value",x),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("div",{className:"row input-group m-3 mx-auto w-50"},r.a.createElement("label",{className:"col-sm-6 col-form-label"},"Select the number of ads on the page"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{className:"form-control",onChange:function(e){y(+e.target.value)},name:"select"},r.a.createElement("option",{key:10,value:10},"10"),r.a.createElement("option",{key:20,value:20},"20"),r.a.createElement("option",{key:30,value:30},"30"),r.a.createElement("option",{key:50,value:50},"50"),r.a.createElement("option",{key:100,value:100},"100")))),r.a.createElement("div",{className:"row input-group m-3 justify-content-md-center"},r.a.createElement("input",{type:"search",className:"form-control col-5",onChange:function(e){w(e.target.value)},placeholder:"Enter ad"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",type:"submit",onClick:function(){t({type:"skip/reset"}),N()},disabled:"searching"===s},"Search Ad"))),r.a.createElement("div",{className:"col-sm-12 my-3"},r.a.createElement(A,{noData:null!==a&&0===a.length,status:s,content:"You have no ads loaded",redirectTo:"/ad/curUser"},r.a.createElement("ul",null,null===a?null:a.map(function(e){return r.a.createElement(B,Object.assign({key:e._id},e),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm mr-3",style:{width:"70px"},onClick:function(){return function(e){console.log("adId",e);var a={_id:e};console.log("adIdDel",a),t({type:"adUserDelete/request",payload:a}),g(!p)}(e._id)}},"Delete"),r.a.createElement(l.b,{to:"/ad/curUser/edit/".concat(e._id),style:{width:"70px"},className:"btn btn-secondary btn-sm mr-3",role:"button"},"Edit"),r.a.createElement(l.b,{to:"/ad/curUser/".concat(e._id),style:{width:"70px"},className:"btn btn-outline-secondary btn-sm",role:"button"},"View"))})),r.a.createElement("div",{className:" d-flex justify-content-between w-75 mx-auto"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(c<v?{type:"skip/reset"}:{type:"skip/setPrev",payload:v}),N()},disabled:0===c},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(n<=v?{type:"skip/reset"}:{type:"skip/setNext",payload:v}),N()},disabled:c+v>=n},"Next")))))}),X=function(e){var t=e.images,a=r.a.useState(0),n=Object(j.a)(a,2),s=n[0],c=n[1];return r.a.createElement("div",{className:"border rounded my-3 w-75 mx-auto p-3"},r.a.createElement("div",{className:"w-100",style:{height:"750px"}},r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(t[s].url),className:"img-fluid rounded w-100 h-100",alt:"picture"})),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm m-3",disabled:0===s,style:{width:"70px"},onClick:function(){c(function(e){return e-1})}},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm m-3",disabled:s===t.length-1,style:{width:"70px"},onClick:function(){c(function(e){return e+1})}},"Next")))},W=function(e){e._id;var t=e.title,a=e.createdAt,n=e.price,s=e.address,c=e.description,l=e.owner,o=e.onClick,i=e.children;return r.a.createElement("div",{className:"border rounded my-3 mx-auto w-75 p-3"},r.a.createElement("div",{className:"font-weight-bolder text-justify my-3",style:{fontSize:"26px"}},t),r.a.createElement("div",{className:"text-justify my-3",style:{fontSize:"24px"}},"".concat(n," \u0433\u0440\u043d.")),r.a.createElement("div",{className:"my-3"},r.a.createElement("div",{className:"text-justify my-2",style:{fontSize:"22px"}},"Description"),r.a.createElement("div",{className:"text-justify text-break font-italic",style:{fontSize:"18px"}},c)),r.a.createElement("div",{className:"text-justify my-3",style:{fontSize:"18px"}},r.a.createElement("span",null,"Owner: ")," ",r.a.createElement("span",{className:"font-italic"},l.nick||l.login)),r.a.createElement("div",{className:"d-flex my-3",style:{fontSize:"18px"}},r.a.createElement("div",null,"Addresses:"),r.a.createElement("div",{className:"font-italic ml-2"},s||(null===l.addresses?null:0===l.addresses.length?null:l.addresses.map(function(e,t){return 0===t?r.a.createElement("span",{key:t,className:"text-justify text-wrap"},e):r.a.createElement("span",{key:t,className:"text-justify text-wrap"},"; ",e)})))),r.a.createElement("div",{className:"d-flex my-3",style:{fontSize:"18px"}},r.a.createElement("div",null,"Phones:"),r.a.createElement("div",{className:"font-italic"},null===l.phones?null:0===l.phones.length?null:l.phones.map(function(e,t){return 0===t?r.a.createElement("span",{key:t,className:"ml-2 text-wrap"},e):r.a.createElement("span",{key:t,className:"text-wrap"},", ",e)}))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"align-self-start mt-3",style:{fontSize:"14px"}},"Posted: ",new Date(a/1).toLocaleDateString()),r.a.createElement("div",{className:"d-flex justify-content-end flex-grow-1 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary mr-3",onClick:o},"Comments"),i)))};function Z(){var e=Object(w.a)(["\n  mutation addNewAnswer($text: String! $answerTo: CommentInput!) {\n    CommentUpsert(comment: {\n      text: $text,\n      answerTo: $answerTo,\n    }) {\n      _id\n    }\n  }\n"]);return Z=function(){return e},e}function $(){var e=Object(w.a)(["\n  query CommentFind($query: String) {\n    CommentFindOne(query: $query) {\n      _id\n      answerTo {\n        _id\n        ad {\n          _id\n        }\n      }\n      answers {\n        _id\n        text\n        createdAt\n        owner {\n          login\n          nick\n          _id\n        }\n        ad {\n          _id\n        }\n        answerTo {\n          _id\n          ad {\n            _id\n          }\n        }\n      }\n    }\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(w.a)(["\n  mutation addNewComment($text: String! $ad: AdInput!) {\n    CommentUpsert(comment: {\n      text: $text,\n      ad: $ad,\n    }) {\n      _id\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(w.a)(["\n  query adComments ($query: String) {\n    AdFindOne(query: $query) {\n      _id\n      comments {\n        _id\n        owner {\n          login\n          nick\n          _id\n        }\n        ad {\n          _id\n        }\n        text\n        answerTo {\n          _id\n        }\n        answers {\n          _id\n        }\n        createdAt\n      }    \n    }\n  }\n"]);return te=function(){return e},e}var ae=Object(d.gql)(te()),ne=Object(d.gql)(ee()),re=Object(d.gql)($()),se=Object(d.gql)(Z()),ce=function e(t){var a=t.id;console.log("answersId",a);var n=r.a.useState(null),s=Object(j.a)(n,2),c=s[0],l=s[1],o=r.a.useState("idle"),i=Object(j.a)(o,2),u=i[0],m=i[1],d=r.a.useState({answerTo:{_id:a}}),p=Object(j.a)(d,2),g=p[0],f=p[1],v=r.a.useState(!1),y=Object(j.a)(v,2),h=y[0],E=y[1],x=r.a.useState(null),w=Object(j.a)(x,2),N=w[0],O=w[1],k=r.a.useState(!1),S=Object(j.a)(k,2),q=S[0],C=S[1],D=function(){try{m("searching"),b.request(re,{query:JSON.stringify([{_id:a}])}).then(function(e){console.log("res",e),l(e.CommentFindOne),O(null===e.CommentFindOne.answers?null:e.CommentFindOne.answers.filter(function(e){return e.answerTo._id===a}).map(function(e){return Object(M.a)({},e._id,!1)})),m("resolved")})}catch(e){m("rejected")}},I=function(){E(!0)};return r.a.useEffect(function(){D()},[]),console.log(c,"comment",null!==c),r.a.createElement("div",{className:"border rounded my-2 ml-3 p-2"},r.a.createElement(A,{status:u},null===c?null:null===c.answers?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-info"},"No answers"),h?null:r.a.createElement("div",{className:"d-flex justify-content-end flex-grow-1 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mr-3",onClick:I},"Add answer"))):r.a.createElement("div",{className:"d-flex flex-column"},c.answers.filter(function(e){return e.answerTo._id===a}).map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("div",{className:"d-flex my-1",style:{fontSize:"18px"}},r.a.createElement("div",null,t.owner.nick||t.owner.login,":"),r.a.createElement("div",{className:"font-italic text-justify mx-3 flex-grow-1"},t.text),r.a.createElement("div",{style:{fontSize:"14px"},className:"mt-1"},new Date(t.createdAt/1).toLocaleDateString()),r.a.createElement("div",{className:"ml-2"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm",style:{width:"110px"},onClick:function(){return function(e){C(!q),console.log("answersId",N);var t=N;t.map(function(t){Object.keys(t)[0]===e&&(t[e]=!t[e])}),console.log("arrView",t),O(t)}(t._id)}},"View answers"))),null===N||N.length!==c.answers.length?null:N.filter(function(e){return Object.keys(e)[0]===t._id})[0][t._id]?r.a.createElement("div",null,r.a.createElement(e,{id:t._id})):null)}),h?null:r.a.createElement("div",{className:"d-flex justify-content-end mt-3 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mr-3",onClick:I},"Add answer"))),h?r.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{m("searching"),b.request(se,g).then(function(e){console.log("res",e),f({answerTo:{_id:a}}),D(),E(!1)})}catch(e){m("rejected")}}},r.a.createElement("div",{className:"mt-2 form-group"},r.a.createElement("textarea",{className:"form-control",placeholder:"Enter comment",name:"text",onChange:function(e){e.persist(),f(function(t){return Object(P.a)(Object(P.a)({},t),{},Object(M.a)({},e.target.name,e.target.value))}),console.log("value",g)},required:!0}),r.a.createElement("div",{className:"d-flex justify-content-end mt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Send answer")))):null))},le=function(e){var t=e.id,a=r.a.useState(null),n=Object(j.a)(a,2),s=n[0],c=n[1],l=r.a.useState("idle"),o=Object(j.a)(l,2),i=o[0],u=o[1],m=r.a.useState({ad:{_id:t}}),d=Object(j.a)(m,2),p=d[0],g=d[1],f=r.a.useState(!1),v=Object(j.a)(f,2),y=v[0],h=v[1],E=r.a.useState(null),x=Object(j.a)(E,2),w=x[0],N=x[1],O=r.a.useState(!1),k=Object(j.a)(O,2),S=k[0],q=k[1],C=function(){try{u("searching"),b.request(ae,{query:JSON.stringify([{_id:t}])}).then(function(e){console.log("res",e),c(e.AdFindOne),N(null===e.AdFindOne.comments?null:e.AdFindOne.comments.map(function(e){return Object(M.a)({},e._id,!1)})),u("resolved")})}catch(e){u("rejected")}},D=function(){h(!0)};return r.a.useEffect(function(){C()},[]),console.log(s,"result",null!==s),console.log("answersId",w),r.a.createElement("div",{className:"border rounded my-2 mx-auto w-75 p-3"},r.a.createElement(A,{status:i},null===s?null:null===s.comments?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-info"},"No comments"),y?null:r.a.createElement("div",{className:"d-flex justify-content-end flex-grow-1 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mr-3",onClick:D},"Add comment"))):r.a.createElement("div",{className:"d-flex flex-column"},s.comments.filter(function(e){return null===e.answerTo}).map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("div",{className:"d-flex my-1",style:{fontSize:"18px"}},r.a.createElement("div",null,e.owner.nick||e.owner.login,":"),r.a.createElement("div",{className:"font-italic text-justify mx-3 flex-grow-1"},e.text),r.a.createElement("div",{style:{fontSize:"14px"},className:"mt-1"},new Date(e.createdAt/1).toLocaleDateString()),r.a.createElement("div",{className:"ml-2"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary btn-sm",style:{width:"110px"},onClick:function(){return function(e){q(!S);var t=w;t.map(function(t){Object.keys(t)[0]===e&&(t[e]=!t[e])}),console.log("arrView",t),N(t)}(e._id)}},"View answers"))),null===w||w.length!==s.comments.length?null:w.filter(function(t){return Object.keys(t)[0]===e._id})[0][e._id]?r.a.createElement("div",null,r.a.createElement(ce,{id:e._id})):null)}),y?null:r.a.createElement("div",{className:"d-flex justify-content-end mt-3 align-items-end"},r.a.createElement("button",{type:"button",className:"btn btn-outline-dark mr-3",onClick:D},"Add comment"))),y?r.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{u("searching"),b.request(ne,p).then(function(e){console.log("res",e),g({ad:{_id:t}}),C(),h(!1)})}catch(e){u("rejected")}}},r.a.createElement("div",{className:"mt-2 form-group"},r.a.createElement("textarea",{className:"form-control",placeholder:"Enter comment",name:"text",onChange:function(e){e.persist(),g(function(t){return Object(P.a)(Object(P.a)({},t),{},Object(M.a)({},e.target.name,e.target.value))}),console.log("value",p)},required:!0}),r.a.createElement("div",{className:"d-flex justify-content-end mt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-primary"},"Send comment")))):null))};function oe(){var e=Object(w.a)(["\n  mutation deleteAD($adId: ID) {\n    AdDelete(ad: {\n      _id: $adId\n     }) {\n      _id\n    }\n  }\n"]);return oe=function(){return e},e}function ie(){var e=Object(w.a)(["\n  query adFindOne($query: String) {\n    AdFindOne(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick \n        phones\n        addresses\n      } \n      price\n      createdAt\n      title\n      tags\n      address\n      description\n      images {\n        url\n      }\n    }\n  }\n"]);return ie=function(){return e},e}var ue=Object(d.gql)(ie()),me=Object(d.gql)(oe()),de=function(){var e=Object(o.g)()._id,t=r.a.useState(null),a=Object(j.a)(t,2),n=a[0],s=a[1],c=r.a.useState("idle"),i=Object(j.a)(c,2),u=i[0],m=i[1],d=r.a.useState(!1),p=Object(j.a)(d,2),g=p[0],f=p[1],v=function(){var e=Object(x.a)(E.a.mark(function e(t){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("adId",t),a={_id:t},console.log("adIdDel",a),e.prev=3,m("searching"),e.next=7,b.request(me,a);case 7:n=e.sent,console.log("resDel",n),m("deleted"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),m("rejected");case 15:case"end":return e.stop()}},e,null,[[3,12]])}));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect(function(){!function(){try{m("searching"),b.request(ue,{query:JSON.stringify([{_id:e}])}).then(function(e){console.log("res",e),s(e.AdFindOne),m("resolved")})}catch(t){m("rejected")}}()},[]),console.log(n,"result",null!==n),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("div",{className:"col-sm-12 my-3"},r.a.createElement(A,{status:u,redirectTo:"/ad/curUser"},null===n?null:null===n.images||0===n.images.length?r.a.createElement("div",{className:"border rounded my-3 mx-auto w-25 p-3"},r.a.createElement("img",{src:R.a,className:"img-fluid rounded",alt:"picture"})):null===n.images[0].url?r.a.createElement("div",{className:"border rounded my-3 mx-auto w-25 p-3"},r.a.createElement("img",{src:R.a,className:"img-fluid rounded",alt:"picture"})):r.a.createElement(X,{images:n.images.filter(function(e){return null!==e.url})}),null===n?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(W,Object.assign({onClick:function(){f(!g)}},n),r.a.createElement("button",{type:"button",className:"btn btn-outline-danger mr-3",style:{width:"70px"},onClick:function(){return v(n._id)}},"Delete"),r.a.createElement(l.b,{to:"/ad/curUser/edit/".concat(n._id),style:{width:"70px"},className:"btn btn-secondary mr-3",role:"button"},"Edit")),g?r.a.createElement(le,{id:e}):null))))};function pe(){var e=Object(w.a)(["\n  mutation post($_id: ID, $title: String!, $description: String, $images: [ImageInput], $tags: [String], $address: String, $price: Float!) {\n    AdUpsert(ad: {\n      _id: $_id\n      title: $title,\n      description: $description,\n      images: $images,\n      tags: $tags\n      address: $address,\n      price: $price\n\n    }) {\n      _id\n    }\n  }\n"]);return pe=function(){return e},e}function ge(){var e=Object(w.a)(["\n  query adFindOne($query: String) {\n    AdFind(query: $query) {\n      _id\n      images {\n        _id\n        url\n      }\n      title\n      description\n      tags\n      address\n      price\n    }\n  }\n"]);return ge=function(){return e},e}var fe=Object(d.gql)(ge()),be=Object(d.gql)(pe()),ve=Object(u.b)(function(e){return{arrImages:e.images.arrImages,status:e.images.status}})(function(e){var t=e.dispatch,a=e.arrImages,n=e.status,s=Object(o.g)()._id,c=r.a.useState(null),l=Object(j.a)(c,2),i=l[0],u=l[1],m=r.a.useState(!1),d=Object(j.a)(m,2),p=d[0],g=d[1],f=r.a.useState(!0),v=Object(j.a)(f,2),y=v[0],h=v[1],E=function(e){var t=e.target;"price"===t.name?u(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,+t.value))}):u(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))}),console.log("values",i)};return r.a.useEffect(function(){return y&&(function(){try{t({type:"request/pending"}),b.request(fe,{query:JSON.stringify([{_id:s}])}).then(function(e){var a=new Set(e.AdFind[0].tags);["sport","entertainment","health","antiques","technology"].forEach(function(e){return a.add(e)}),e.AdFind[0].tags=Object(L.a)(a);var n=null===e.AdFind[0].images?[]:0===e.AdFind[0].images.length?[]:e.AdFind[0].images.filter(function(e){return null!==e.url});t({type:"arrImages/formed",payload:n}),e.AdFind[0].images=[],u(e.AdFind[0]),t({type:"request/finding"}),console.log("arrOldImages",n)})}catch(e){t({type:"request/rejected"})}}(),h(!1)),function(){return t({type:"request/reset"})}},[]),console.log(i,"result",null!==i&&0!==i.length),r.a.createElement("div",{className:"mt-3 flex-grow-1"},null===i?null:r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==a.length&&(a.forEach(function(e){var t=e._id;console.log("imageId",{_id:t}),i.images.push({_id:t})}),console.log("images",i.images));try{t({type:"request/pending"}),console.log("values",i),b.request(be,i).then(function(e){console.log("res",e),t({type:"request/resolved"})})}catch(e){t({type:"request/rejected"})}},className:"col-8 mx-auto mt-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Title *"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Title",name:"title",onChange:E,defaultValue:i.title,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Description"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("textarea",{className:"form-control",placeholder:"Description",name:"description",onChange:E,defaultValue:i.description}))),r.a.createElement("div",{className:"form-group row mb-1"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"ImageInput"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"file",className:"form-control-file",placeholder:"ImageInput",name:"imageInput",onChange:function(e){t({type:"getArrImages/request",payload:e.target.files})},disabled:"searching"===n,multiple:!0})),r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap ml-3"},null===a||0===a.length?null:null===a[0].url?null:a.map(function(e,s){return null===e.url?null:r.a.createElement("div",{key:s,className:"mt-3 col-3 w-100 mx-auto px-3"},r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(e.url),className:"img-fluid rounded w-100 h-100",alt:"picture"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm my-3",disabled:"searching"===n,onClick:function(){return e=s,a.splice(e,1),t({type:"arrImages/formed",payload:a}),void g(!p);var e}},"Delete")))}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Tags"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(J.a,{tags:i.tags,onChange:function(e){return function(e){u(function(t){return Object(P.a)(Object(P.a)({},t),{},{tags:Object(L.a)(e)})}),console.log("values",i)}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Address"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Address",name:"address",onChange:E,defaultValue:i.address}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Price *"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Price",name:"price",onChange:E,defaultValue:i.price,required:!0}))),r.a.createElement("button",{className:"btn btn-secondary",disabled:"searching"===n},"Edit ad")),r.a.createElement(A,{status:n},r.a.createElement(o.a,{to:"/ad/curUser"})))}),ye=Object(u.b)()(function(e){var t=e.dispatch;return r.a.createElement("div",{className:"m-3"},r.a.createElement("button",{onClick:function(){localStorage.removeItem("token"),b.setHeader("Authorization",null),t({type:"user/logout"})},type:"button",className:"btn btn-outline-secondary"},"Log out"))}),he=Object(u.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn,isNewUser:e.auth.isNewUser}})(function(e){var t=e.isLoggedIn,a=e.isNewUser,n=e.dispatch,s=function(e){e.preventDefault(),n({type:"new-user",payload:e.target.value}),console.log("radio",e.target.value)};return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("div",{className:"collapse navbar-collapse d-flex justify-content-between"},r.a.createElement("div",null,!0===t?r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/"},"My profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/ad/curUser"},"My ads")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/ad/find"},"Find ad")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/ad/post"},"Post ad")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",to:"/messages"},"Messages"))):null),!0===t?r.a.createElement(ye,null):r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},r.a.createElement("label",{className:"btn btn-outline-secondary m-3 rounded ".concat("auth"===a?"active":"")},r.a.createElement("input",{type:"radio",name:"login",value:"auth",onChange:s})," Authorization"),r.a.createElement("label",{className:"btn btn-outline-secondary m-3 rounded ".concat("reg"===a?"active":"")},r.a.createElement("input",{type:"radio",name:"login",value:"reg",onChange:s})," Registration"),r.a.createElement("label",{className:"btn btn-outline-secondary m-3 rounded ".concat("chng"===a?"active":"")},r.a.createElement("input",{type:"radio",name:"login",value:"chng",onChange:s})," Change password"))))});function Ee(){var e=Object(w.a)(["\n  mutation deleteAvatar($id: ID) {\n    ImageDelete(image: {\n      _id: $id\n     }) {\n      _id\n    }\n  }\n"]);return Ee=function(){return e},e}function xe(){var e=Object(w.a)(["\n  mutation edit($_id: String, $login: String, $nick: String, $avatar: ImageInput, $phones: [String], $addresses: [String]) {\n    UserUpsert(user: {\n      _id: $_id\n      login: $login,\n      nick: $nick,\n      avatar: $avatar,\n      phones: $phones\n      addresses: $addresses,\n    }) {\n      _id\n    }\n  }\n"]);return xe=function(){return e},e}function je(){var e=Object(w.a)(["\n  query userFind($query: String) {\n    UserFind(query: $query) {\n      _id\n      createdAt\n      login\n      nick\n      avatar {\n        _id\n        url\n      }\n      phones\n      addresses \n    }\n  }\n"]);return je=function(){return e},e}var we=Object(d.gql)(je()),Ne=Object(d.gql)(xe()),Oe=Object(d.gql)(Ee()),ke=Object(u.b)(function(e){return{token:e.auth.token}})(function(e){var t=e.token,a=Object(o.g)()._id,n=r.a.useState(null),s=Object(j.a)(n,2),c=s[0],l=s[1],i=r.a.useState("idle"),u=Object(j.a)(i,2),m=u[0],d=u[1],p=r.a.useState(!0),g=Object(j.a)(p,2),f=g[0],v=g[1],y=r.a.useState(!1),h=Object(j.a)(y,2),w=h[0],N=h[1],O=function(e){var t=e.target;l(function(e){return Object(P.a)(Object(P.a)({},e),{},Object(M.a)({},t.name,t.value))}),console.log("values",c)},k=function(){var e=Object(x.a)(E.a.mark(function e(){var t;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d("searching"),e.next=4,b.request(Oe,{_id:c.avatar._id});case 4:t=e.sent,console.log("resDel",t),d("resolved"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d("rejected");case 12:c.avatar=null,N(!w);case 14:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}();return r.a.useEffect(function(){f&&(function(){try{d("searching"),b.request(we,{query:JSON.stringify([{_id:a}])}).then(function(e){console.log("res",e),null===e.UserFind[0].addresses&&(e.UserFind[0].addresses=[]),null===e.UserFind[0].phones&&(e.UserFind[0].phones=[]),l(e.UserFind[0]),d("resolved")})}catch(e){d("rejected")}}(),v(!1))},[w]),console.log(c,"result",null!==c&&0!==c.length),r.a.createElement("div",{className:"Container mt-3 flex-grow-1"},r.a.createElement(A,{status:m,redirectTo:"/"},null===c?null:r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null===c.avatar?delete c.avatar:delete c.avatar.url;try{d("searching"),b.request(Ne,c).then(function(e){console.log("res",e),d("deleted")})}catch(e){d("rejected")}},className:"col-8 mx-auto mt-3"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Login *"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Login",name:"login",onChange:O,defaultValue:c.login,required:!0}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Nick"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Nick",name:"nick",onChange:O,defaultValue:c.nick}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Avatar"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{type:"file",className:"form-control-file",placeholder:"ImageInput",name:"avatar",onChange:function(e){d("searching");var a=new FormData;a.append("photo",e.target.files[0]),fetch("http://marketplace.asmer.fs.a-level.com.ua/upload",{method:"POST",headers:t?{Authorization:"Bearer "+t}:{},body:a}).then(function(e){return e.json()}).then(function(e){console.log("json",e),l(function(t){return Object(P.a)(Object(P.a)({},t),{},{avatar:{_id:e._id,url:e.url}})}),d("resolved")})},disabled:c.avatar})),null===c.avatar||void 0===c.avatar||void 0===c.avatar.url?null:r.a.createElement("div",{className:"col-3 mx-auto pt-3"},r.a.createElement("div",{className:"w-100"},r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(c.avatar.url),className:"img-fluid rounded w-100 h-100",alt:"picture"})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger btn-sm my-3",onClick:k},"Delete")))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Phones"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(J.a,{tags:c.phones,onChange:function(e){return function(e){l(function(t){return Object(P.a)(Object(P.a)({},t),{},{phones:Object(L.a)(e)})})}(e)}}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{className:"col-sm-2 col-form-label"},"Addresses"),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(J.a,{tags:c.addresses,onChange:function(e){return function(e){l(function(t){return Object(P.a)(Object(P.a)({},t),{},{addresses:Object(L.a)(e)})})}(e)}}))),r.a.createElement("button",{className:"btn btn-secondary",disabled:"searching"===m},"Edit profile"))))}),Se=function(e){var t=e.dispatch,a=e.userId,n=e.name,s=e.messageSendStatus,c=e.isSendMessage,l=e.isDisabled,o=e.isSendMessageYourself,i=e.isMessagesOneUserScreen,u=e.token,d=r.a.useState({to:{_id:a}}),p=Object(j.a)(d,2),g=p[0],f=p[1],b=r.a.useRef(null),v=Object(m.a)(u).sub.id;return r.a.createElement("div",{className:"border rounded my-2 mx-auto w-75 p-3"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v===a?(t({type:"messageSend/yourself"}),b.current.value=null):(t({type:"messageSend/request",payload:g}),b.current.value=null)}},r.a.createElement("div",{className:"mt-2 form-group mb-0"},r.a.createElement("textarea",{className:"form-control",placeholder:"Enter message",name:"text",onChange:function(e){e.persist(),f(function(t){return Object(P.a)(Object(P.a)({},t),{},Object(M.a)({},e.target.name,e.target.value))}),console.log("value",g)},ref:b,required:!0}),r.a.createElement("div",{className:"d-flex justify-content-end mt-3"},r.a.createElement("button",{type:"submit",className:"btn btn-outline-success w-25",disabled:l},"Send message")))),r.a.createElement(A,{status:s},i?null:c?r.a.createElement("div",{className:"my-3"},r.a.createElement("span",{className:"alert alert-info mb-0"},"The message was successfully sent to the user ",n)):o?r.a.createElement("div",{className:"my-3"},r.a.createElement("span",{className:"alert alert-warning mb-0"},"You cannot send yourself a message")):null))};Se.defaultProps={isMessagesOneUserScreen:!1};var Ae=Se;function qe(){var e=Object(w.a)(["\n  query adFindOne($query: String) {\n    AdFindOne(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick \n        phones\n        addresses\n      } \n      price\n      createdAt\n      title\n      tags\n      address\n      description\n      images {\n        url\n      }\n    }\n  }\n"]);return qe=function(){return e},e}var Ce=Object(d.gql)(qe()),De=Object(u.b)(function(e){return{messageSendStatus:e.messages.messageSendStatus,isSendMessage:e.messages.isSendMessage,isSendMessageYourself:e.messages.isSendMessageYourself,isDisabled:e.messages.isDisabled,token:e.auth.token}})(function(e){var t=e.dispatch,a=e.messageSendStatus,n=e.isSendMessage,s=e.isSendMessageYourself,c=e.isDisabled,l=e.token,i=Object(o.g)()._id,u=r.a.useState(null),m=Object(j.a)(u,2),d=m[0],p=m[1],g=r.a.useState("idle"),f=Object(j.a)(g,2),v=f[0],y=f[1],h=r.a.useState(!1),E=Object(j.a)(h,2),x=E[0],w=E[1];return r.a.useEffect(function(){!function(){try{y("searching"),b.request(Ce,{query:JSON.stringify([{_id:i}])}).then(function(e){console.log("res",e),p(e.AdFindOne),y("resolved")})}catch(e){y("rejected")}}()},[]),console.log(d,"result",null!==d),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("div",{className:"col-sm-12 my-3"},r.a.createElement(A,{status:v},null===d?null:null===d.images||0===d.images.length?r.a.createElement("div",{className:"border rounded my-3 mx-auto w-25 p-3"},r.a.createElement("img",{src:R.a,className:"img-fluid rounded",alt:"picture"})):null===d.images[0].url?r.a.createElement("div",{className:"border rounded my-3 mx-auto w-25 p-3"},r.a.createElement("img",{src:R.a,className:"img-fluid rounded",alt:"picture"})):r.a.createElement(X,{images:d.images.filter(function(e){return null!==e.url})}),null===d?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(W,Object.assign({onClick:function(){w(!x)}},d)),x?r.a.createElement(le,{id:i}):null,r.a.createElement(Ae,{userId:d.owner._id,name:d.owner.nick||d.owner.login,messageSendStatus:a,isSendMessage:n,isSendMessageYourself:s,isDisabled:c,dispatch:t,token:l})))))}),Ie=Object(u.b)(function(e){return{adsData:e.ads.adsData,adsCount:e.ads.adsCount,status:e.ads.status,skip:e.ads.skip}})(function(e){var t=e.dispatch,a=e.adsData,n=e.adsCount,s=e.status,c=e.skip,i=Object(o.g)()._id,u=r.a.useState(10),m=Object(j.a)(u,2),d=m[0],p=m[1],g=function(){t({type:"adsUserFind/request",payload:{value:null,id:i,skip:c,limit:d}})};return r.a.useEffect(function(){return g(),function(){return t({type:"findRequest/reset"})}},[d]),console.log(a,"result",null!==a&&0!==a.length),console.log("skip",c),console.log("limit",d),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement("div",{className:"row input-group m-3 mx-auto w-50"},r.a.createElement("label",{className:"col-sm-6 col-form-label"},"Select the number of ads on the page"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("select",{className:"form-control",onChange:function(e){p(+e.target.value)},name:"select"},r.a.createElement("option",{key:10,value:10},"10"),r.a.createElement("option",{key:20,value:20},"20"),r.a.createElement("option",{key:30,value:30},"30"),r.a.createElement("option",{key:50,value:50},"50"),r.a.createElement("option",{key:100,value:100},"100")))),r.a.createElement("div",{className:"col-sm-12 my-3"},r.a.createElement(A,{status:s},r.a.createElement("ul",null,null===a?null:a.map(function(e){return r.a.createElement(B,Object.assign({key:e._id},e),r.a.createElement(l.b,{to:"/ad/otherUser/".concat(e._id),style:{width:"70px"},className:"btn btn-outline-secondary btn-sm",role:"button"},"View"))})),r.a.createElement("div",{className:" d-flex justify-content-between w-75 mx-auto"},r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(c<d?{type:"skip/reset"}:{type:"skip/setPrev",payload:d}),g()},disabled:0===c},"Prev"),r.a.createElement("button",{type:"button",className:"btn btn-outline-info btn-sm m-3",style:{width:"70px"},onClick:function(){t(n<=d?{type:"skip/reset"}:{type:"skip/setNext",payload:d}),g()},disabled:c+d>=n},"Next")))))}),Fe=Object(u.b)(function(e){return{messageData:e.messages.messageData,messageGetStatus:e.messages.messageGetStatus,lastMessagesData:e.messages.lastMessagesData}})(function(e){var t=e.dispatch,a=e.messageData,n=e.messageGetStatus,s=e.lastMessagesData,c=localStorage.getItem("token"),o=Object(m.a)(c).sub.id;return r.a.useEffect(function(){return t({type:"messageGet/request",payload:o}),function(){t({type:"cancelMessageGet/request"})}},[]),console.log(a,"messageData",null!==a),console.log("lastMessagesData",s),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement(A,{noData:null!==a&&0===a.length,status:n,content:"You have no messages"},null===s?null:r.a.createElement("div",{className:"w-75 mx-auto"},r.a.createElement("ul",{className:"list-unstyled"},r.a.createElement("li",{key:-1},r.a.createElement("div",{className:"row d-flex p-3"},r.a.createElement("div",{className:"col-3 font-weight-bold",style:{fontSize:"20px"}},"User"),r.a.createElement("div",{className:"col-7 font-weight-bold",style:{fontSize:"20px"}},"Last message"),r.a.createElement("div",{className:"col-2 font-weight-bold",style:{fontSize:"20px"}},"Created"))),null===s?null:s.map(function(e,t){return e.owner._id===o?r.a.createElement("li",{key:t},r.a.createElement(l.b,{to:"/messages/".concat(e.to._id),className:"text-reset text-decoration-none"},r.a.createElement("div",{className:"row d-flex border-top p-3 lastMessage"},r.a.createElement("div",{className:"col-1 d-flex align-items-center"},null===e.to.avatar?r.a.createElement("img",{src:O.a,className:"img-fluid rounded-circle",alt:"picture",style:{objectFit:"cover",width:"50px",height:"50px"}}):r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(e.to.avatar.url),className:"img-fluid rounded-circle",alt:"picture",style:{objectFit:"cover",width:"50px",height:"50px"}})),r.a.createElement("div",{className:"col-2 d-flex align-items-center justify-content-center text-break",style:{fontSize:"18px"}},e.to.nick||e.to.login),r.a.createElement("div",{className:"col-7 d-flex align-items-center font-italic text-break text-justify",style:{fontSize:"18px"}},'to: "',e.text,'"'),r.a.createElement("div",{className:"col-2 d-flex align-items-center justify-content-center",style:{fontSize:"14px"}},new Date(e.createdAt/1).toLocaleString())))):r.a.createElement("li",{key:t},r.a.createElement(l.b,{to:"/messages/".concat(e.owner._id),className:"text-reset text-decoration-none"},r.a.createElement("div",{className:"row d-flex border-top p-3 lastMessage"},r.a.createElement("div",{className:"col-1 d-flex align-items-center"},null===e.owner.avatar?r.a.createElement("img",{src:O.a,className:"img-fluid rounded-circle",alt:"picture",style:{objectFit:"cover",width:"50px",height:"50px"}}):r.a.createElement("img",{src:"http://marketplace.asmer.fs.a-level.com.ua/".concat(e.owner.avatar.url),className:"img-fluid rounded-circle",alt:"picture",style:{objectFit:"cover",width:"50px",height:"50px"}})),r.a.createElement("div",{className:"col-2 d-flex align-items-center justify-content-center text-break",style:{fontSize:"18px"}},e.owner.nick||e.owner.login),r.a.createElement("div",{className:"col-7 d-flex align-items-center font-italic text-break text-justify",style:{fontSize:"18px"}},'from: "',e.text,'"'),r.a.createElement("div",{className:"col-2 d-flex align-items-center justify-content-center",style:{fontSize:"14px"}},new Date(e.createdAt/1).toLocaleString()))))})))))}),Me=Object(u.b)(function(e){return{messageData:e.messages.messageData,messageGetStatus:e.messages.messageGetStatus,messageSendStatus:e.messages.messageSendStatus,isSendMessage:e.messages.isSendMessage,isSendMessageYourself:e.messages.isSendMessageYourself,isDisabled:e.messages.isDisabled,token:e.auth.token}})(function(e){var t=e.dispatch,a=e.messageData,n=e.messageGetStatus,s=e.messageSendStatus,c=e.isSendMessage,l=e.isSendMessageYourself,i=e.isDisabled,u=e.token,d=Object(m.a)(u).sub.id,p=Object(o.g)()._id;return r.a.useEffect(function(){return t({type:"oneUserMessageGet/request",payload:{id:d,_id:p}}),function(){t({type:"cancelMessageGet/request"})}},[]),console.log(a,"messageData",null!==a),r.a.createElement("div",{className:"mt-3 flex-grow-1"},r.a.createElement(A,{status:n},null===a?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"w-75 mx-auto text-break text-secondary"},"Correspondence with the user ",a[0].owner._id===d?a[0].to.nick||a[0].to.login:a[0].owner.nick||a[0].owner.login),r.a.createElement("div",{className:"border rounded my-3 mx-auto w-75 p-3 d-flex flex-column"},a.map(function(e,t){return e.owner._id===d?r.a.createElement("div",{key:t,className:"row d-flex my-2 px-3 text-success ml-3"},r.a.createElement("div",{className:"col-auto mt-2 pt-1 ml-3",style:{fontSize:"16px"}},"Your message:"),r.a.createElement("div",{className:"col font-italic text-justify p-0 d-flex"},r.a.createElement("div",{className:"alert alert-success mb-0"},r.a.createElement("p",{className:"mb-1 text-break"},e.text),r.a.createElement("hr",{className:"my-1"}),r.a.createElement("p",{style:{fontSize:"12px"},className:"float-right mb-0"},new Date(e.createdAt/1).toLocaleString())))):r.a.createElement("div",{key:t,className:"row d-flex mr-3 my-2 px-3 text-primary"},r.a.createElement("div",{className:"col-auto text-break text-left mt-2 pt-1",style:{fontSize:"16px"}},e.owner.nick||e.owner.login,":"),r.a.createElement("div",{className:"col font-italic text-justify p-0 d-flex mr-3"},r.a.createElement("div",{className:"alert alert-primary mb-0"},r.a.createElement("p",{className:"mb-1 text-break"},e.text),r.a.createElement("hr",{className:"my-1"}),r.a.createElement("p",{style:{fontSize:"12px"},className:"float-right mb-0"},new Date(e.createdAt/1).toLocaleString()))))})),r.a.createElement(Ae,{userId:p,name:a[0].owner._id===d?a[0].to.nick||a[0].to.login:a[0].owner.nick||a[0].owner.login,messageSendStatus:s,isSendMessage:c,isSendMessageYourself:l,isDisabled:i,isMessagesOneUserScreen:!0,token:u,dispatch:t}))))}),Pe=a(42),Ue=a.n(Pe),_e=function(){return r.a.createElement("div",{className:"mt-3 flex-grow-1"}," Page not found")};var ze=function(){return r.a.createElement("div",{className:"d-flex flex-column App"},r.a.createElement("header",{className:"bg-secondary d-flex"},r.a.createElement("img",{src:Ue.a,className:"img-fluid rounded pl-3 my-auto  ml-3",style:{width:"70px",height:"70px"}}),r.a.createElement("div",{className:"text-white font-weight-bold text-left align-middle p-2 m-3",style:{fontSize:"24px"}},"Stock exchange")),r.a.createElement(l.a,null,r.a.createElement(he,null),r.a.createElement(o.d,null,r.a.createElement(y,{exact:!0,path:"/",redirectTo:"/login"},r.a.createElement(F,null)),r.a.createElement(y,{exact:!0,path:"/profile/edit/:_id",redirectTo:"/login"},r.a.createElement(ke,null)),r.a.createElement(y,{exact:!0,path:"/ad/find",redirectTo:"/login"},r.a.createElement(T,null)),r.a.createElement(y,{exact:!0,path:"/ad/curUser",redirectTo:"/login"},r.a.createElement(H,null)),r.a.createElement(y,{exact:!0,path:"/ad/otherUser/:_id",redirectTo:"/login"},r.a.createElement(De,null)),r.a.createElement(y,{exact:!0,path:"/ads/otherUser/:_id",redirectTo:"/login"},r.a.createElement(Ie,null)),r.a.createElement(y,{exact:!0,path:"/ad/curUser/:_id",redirectTo:"/login"},r.a.createElement(de,null)),r.a.createElement(y,{exact:!0,path:"/ad/curUser/edit/:_id",redirectTo:"/login"},r.a.createElement(ve,null)),r.a.createElement(y,{exact:!0,path:"/ad/post",redirectTo:"/login"},r.a.createElement(Q,null)),r.a.createElement(y,{exact:!0,path:"/messages",redirectTo:"/login"},r.a.createElement(Fe,null)),r.a.createElement(y,{exact:!0,path:"/messages/:_id",redirectTo:"/login"},r.a.createElement(Me,null)),r.a.createElement(o.b,{path:"/login",exact:!0},r.a.createElement(G,null)),r.a.createElement(o.b,null,r.a.createElement(_e,null)))),r.a.createElement("footer",{className:"bg-dark mt-3",id:"footer"},r.a.createElement("div",null)))},Ge=(a(58),a(22)),Ye=a(43),Re={isLoggedIn:!!localStorage.getItem("token"),isNewUser:"reg",token:localStorage.getItem("token"),status:"idle"},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/pending":return Object(P.a)(Object(P.a)({},e),{},{status:"pending"});case"login/resolved":return Object(P.a)(Object(P.a)({},e),{},{isLoggedIn:!0,token:t.payload,status:"resolved"});case"login/notRegistered":return Object(P.a)(Object(P.a)({},e),{},{status:"notRegistered"});case"login/rejected":return Object(P.a)(Object(P.a)({},e),{},{status:"rejected",isLoggedIn:!1});case"registration/isRegistered":return Object(P.a)(Object(P.a)({},e),{},{status:"isRegistered"});case"registration/registered":return Object(P.a)(Object(P.a)({},e),{},{status:"registered"});case"password/changed":return Object(P.a)(Object(P.a)({},e),{},{status:"changed"});case"password/notChanged":return Object(P.a)(Object(P.a)({},e),{},{status:"notChanged"});case"new-user":return Object(P.a)(Object(P.a)({},e),{},{isNewUser:t.payload,status:"idle"});case"user/logout":return Object(P.a)(Object(P.a)({},e),{},{isLoggedIn:!1,token:null,status:"idle"});default:return e}},Te=a(3);function Le(){var e=Object(w.a)(["\n  mutation change($login: String!, $password: String!, $newPassword: String!) {\n    changePassword(login: $login, password: $password, newPassword: $newPassword) {\n      _id\n      login\n    }\n  }\n"]);return Le=function(){return e},e}function Je(){var e=Object(w.a)(["\n  mutation create($login: String!, $password: String!) {\n    createUser(login: $login, password: $password) {\n      _id\n      login\n    }\n  }\n"]);return Je=function(){return e},e}var Ke=E.a.mark(at),Ve=E.a.mark(nt),Qe=E.a.mark(st),He=E.a.mark(ct),Xe=E.a.mark(ot),We=E.a.mark(it);function Ze(){var e=Object(w.a)(["\n  query auth($login: String!, $password: String!) {\n    login(login: $login, password: $password) \n  }\n"]);return Ze=function(){return e},e}var $e=Object(d.gql)(Ze());function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=Object(x.a)(E.a.mark(function e(t,a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("API",b),e.next=3,b.request(t,a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e){var t,a;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.e)({type:"login/pending"});case 2:return n.prev=2,n.next=5,Object(Te.b)(et,$e,e.payload);case 5:if(t=n.sent,a=t.login,console.log("login",a),null!==a){n.next=13;break}return n.next=11,Object(Te.e)({type:"login/notRegistered"});case 11:n.next=18;break;case 13:return localStorage.setItem("token",a),console.log(localStorage.getItem("token")),b.setHeader("Authorization","Bearer ".concat(a)),n.next=18,Object(Te.e)({type:"login/resolved",payload:a});case 18:n.next=24;break;case 20:return n.prev=20,n.t0=n.catch(2),n.next=24,Object(Te.e)({type:"login/rejected"});case 24:case"end":return n.stop()}},Ke,null,[[2,20]])}function nt(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("login/request",at);case 2:case"end":return e.stop()}},Ve)}var rt=Object(d.gql)(Je());function st(e){var t,a;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.e)({type:"login/pending"});case 2:return n.prev=2,n.next=5,Object(Te.b)(et,rt,e.payload);case 5:if(t=n.sent,a=t.createUser,console.log("createUser",a),null!==a){n.next=13;break}return n.next=11,Object(Te.e)({type:"registration/isRegistered"});case 11:n.next=15;break;case 13:return n.next=15,Object(Te.e)({type:"registration/registered"});case 15:n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(2),n.next=21,Object(Te.e)({type:"login/rejected"});case 21:case"end":return n.stop()}},Qe,null,[[2,17]])}function ct(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("registration/request",st);case 2:case"end":return e.stop()}},He)}var lt=Object(d.gql)(Le());function ot(e){var t,a;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.e)({type:"login/pending"});case 2:return n.prev=2,n.next=5,Object(Te.b)(et,lt,e.payload);case 5:if(t=n.sent,a=t.changePassword,console.log("changePassword",a),null!==a){n.next=13;break}return n.next=11,Object(Te.e)({type:"login/notRegistered"});case 11:n.next=15;break;case 13:return n.next=15,Object(Te.e)({type:"password/changed"});case 15:n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(2),n.next=21,Object(Te.e)({type:"login/rejected"});case 21:case"end":return n.stop()}},Xe,null,[[2,17]])}function it(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("changePassword/request",ot);case 2:case"end":return e.stop()}},We)}var ut={adsCount:null,adsData:null,status:"idle",skip:0};var mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"findRequest/pending":return Object(P.a)(Object(P.a)({},e),{},{status:"searching"});case"findRequest/resolved":return Object(P.a)(Object(P.a)({},e),{},{adsData:t.payload.adsData,adsCount:t.payload.adsCount,status:"resolved"});case"findRequest/rejected":return Object(P.a)(Object(P.a)({},e),{},{status:"rejected"});case"findRequest/reset":return Object(P.a)(Object(P.a)({},e),ut);case"skip/reset":return Object(P.a)(Object(P.a)({},e),{},{skip:0});case"skip/setNext":return Object(P.a)(Object(P.a)({},e),{},{skip:e.skip+t.payload});case"skip/setPrev":return Object(P.a)(Object(P.a)({},e),{},{skip:e.skip-t.payload});default:return e}},dt=function(e){return e.ads.skip};function pt(){var e=Object(w.a)(["\n  mutation deleteAD($adId: ID) {\n    AdDelete(ad: {\n      _id: $adId\n     }) {\n      _id\n    }\n  }\n"]);return pt=function(){return e},e}function gt(){var e=Object(w.a)(["\n  query adFind($query: String) {\n    AdFind(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick \n      } \n      price\n      createdAt\n      title\n      images {\n        url\n        _id\n      }\n    }\n  }\n"]);return gt=function(){return e},e}var ft=E.a.mark(Ft),bt=E.a.mark(Mt),vt=E.a.mark(Lt),yt=E.a.mark(Jt),ht=E.a.mark(Ht),Et=E.a.mark(Xt);function xt(){var e=Object(w.a)(['\n  query adFind($query: String) {\n    AdCount(query: "[{}]") \n    AdFind(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick\n      } \n      price\n      createdAt\n      title\n      images {\n        url\n      }\n    }\n  }\n']);return xt=function(){return e},e}function jt(){var e=Object(w.a)(["\n  query adCount($query: String) {\n    AdCount(query: $query) \n  }\n"]);return jt=function(){return e},e}function wt(){var e=Object(w.a)(["\n  query adFind($query: String) {\n    AdFind(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick \n        phones\n        addresses\n      } \n      price\n      createdAt\n      title\n      images {\n        url\n        _id\n      }\n    }\n  }\n"]);return wt=function(){return e},e}var Nt=Object(d.gql)(wt()),Ot=Object(d.gql)(jt()),kt=Object(d.gql)(xt());function St(e,t){return At.apply(this,arguments)}function At(){return(At=Object(x.a)(E.a.mark(function e(t,a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(kt,{query:JSON.stringify([{},{sort:[{_id:-1}],skip:[t],limit:[a]}])});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(e){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(x.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Ot,{query:JSON.stringify([{$or:[{title:"/".concat(String(t),"/")},{description:"/".concat(String(t),"/")},{tags:"/".concat(String(t),"/")}]}])});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dt(e,t,a){return It.apply(this,arguments)}function It(){return(It=Object(x.a)(E.a.mark(function e(t,a,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Nt,{query:JSON.stringify([{$or:[{title:"/".concat(String(t),"/")},{description:"/".concat(String(t),"/")},{tags:"/".concat(String(t),"/")}]},{sort:[{_id:-1}],skip:[a],limit:[n]}])});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(e){var t,a,n,r,s;return E.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Te.e)({type:"findRequest/pending"});case 2:return c.next=4,Object(Te.f)(dt);case 4:if(t=c.sent,null!==e.payload.value){c.next=24;break}return c.prev=6,c.next=9,Object(Te.b)(St,t,e.payload.limit);case 9:return a=c.sent,n=a.AdCount,r=a.AdFind,console.log("AdCount",n),console.log("AdFind",r),c.next=16,Object(Te.e)({type:"findRequest/resolved",payload:{adsData:r,adsCount:n}});case 16:c.next=22;break;case 18:return c.prev=18,c.t0=c.catch(6),c.next=22,Object(Te.e)({type:"findRequest/rejected"});case 22:c.next=47;break;case 24:return c.prev=24,c.t1=Promise,c.next=28,Object(Te.b)(qt,e.payload.value);case 28:return c.t2=c.sent,c.next=31,Object(Te.b)(Dt,e.payload.value,t,e.payload.limit);case 31:return c.t3=c.sent,c.t4=[c.t2,c.t3],c.next=35,c.t1.all.call(c.t1,c.t4);case 35:return s=c.sent,console.log("arrPromise",s),console.log("AdCount",s[0].AdCount),console.log("AdFind",s[1].AdFind),c.next=41,Object(Te.e)({type:"findRequest/resolved",payload:{adsData:s[1].AdFind,adsCount:s[0].AdCount}});case 41:c.next=47;break;case 43:return c.prev=43,c.t5=c.catch(24),c.next=47,Object(Te.e)({type:"findRequest/rejected"});case 47:case"end":return c.stop()}},ft,null,[[6,18],[24,43]])}function Mt(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("adsFind/request",Ft);case 2:case"end":return e.stop()}},bt)}var Pt=Object(d.gql)(gt());function Ut(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(x.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Ot,{query:JSON.stringify([{___owner:t}])});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t,a){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(x.a)(E.a.mark(function e(t,a,n){var r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Pt,{query:JSON.stringify([{___owner:t},{sort:[{_id:-1}],skip:[a],limit:[n]}])});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=Object(x.a)(E.a.mark(function e(t,a){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Ot,{query:JSON.stringify([{___owner:t,$or:[{title:"/".concat(String(a),"/")},{description:"/".concat(String(a),"/")},{tags:"/".concat(String(a),"/")}]}])});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(e,t,a,n){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(x.a)(E.a.mark(function e(t,a,n,r){var s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Pt,{query:JSON.stringify([{___owner:t,$or:[{title:"/".concat(String(a),"/")},{description:"/".concat(String(a),"/")},{tags:"/".concat(String(a),"/")}]},{sort:[{_id:-1}],skip:[n],limit:[r]}])});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lt(e){var t,a,n;return E.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(Te.e)({type:"findRequest/pending"});case 2:return r.next=4,Object(Te.f)(dt);case 4:if(t=r.sent,null!==e.payload.value){r.next=31;break}return r.prev=6,r.t0=Promise,r.next=10,Object(Te.b)(Ut,e.payload.id);case 10:return r.t1=r.sent,r.next=13,Object(Te.b)(zt,e.payload.id,t,e.payload.limit);case 13:return r.t2=r.sent,r.t3=[r.t1,r.t2],r.next=17,r.t0.all.call(r.t0,r.t3);case 17:return a=r.sent,console.log("arrPromise",a),console.log("AdCount",a[0].AdCount),console.log("AdFind",a[1].AdFind),r.next=23,Object(Te.e)({type:"findRequest/resolved",payload:{adsData:a[1].AdFind,adsCount:a[0].AdCount}});case 23:r.next=29;break;case 25:return r.prev=25,r.t4=r.catch(6),r.next=29,Object(Te.e)({type:"findRequest/rejected"});case 29:r.next=54;break;case 31:return r.prev=31,r.t5=Promise,r.next=35,Object(Te.b)(Yt,e.payload.id,e.payload.value);case 35:return r.t6=r.sent,r.next=38,Object(Te.b)(Bt,e.payload.id,e.payload.value,t,e.payload.limit);case 38:return r.t7=r.sent,r.t8=[r.t6,r.t7],r.next=42,r.t5.all.call(r.t5,r.t8);case 42:return n=r.sent,console.log("arrPromise",n),console.log("AdCount",n[0].AdCount),console.log("AdFind",n[1].AdFind),r.next=48,Object(Te.e)({type:"findRequest/resolved",payload:{adsData:n[1].AdFind,adsCount:n[0].AdCount}});case 48:r.next=54;break;case 50:return r.prev=50,r.t9=r.catch(31),r.next=54,Object(Te.e)({type:"findRequest/rejected"});case 54:case"end":return r.stop()}},vt,null,[[6,25],[31,50]])}function Jt(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("adsUserFind/request",Lt);case 2:case"end":return e.stop()}},yt)}var Kt=Object(d.gql)(pt());function Vt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(x.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(Kt,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e){var t,a;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.e)({type:"findRequest/pending"});case 2:return n.prev=2,n.next=5,Object(Te.b)(Vt,e.payload);case 5:return t=n.sent,a=t.AdDelete,console.log("AdDelete",a),n.next=10,Object(Te.e)({type:"findRequest/resolved",payload:{adsData:null,adsCount:null}});case 10:n.next=16;break;case 12:return n.prev=12,n.t0=n.catch(2),n.next=16,Object(Te.e)({type:"findRequest/rejected"});case 16:case"end":return n.stop()}},ht,null,[[2,12]])}function Xt(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("adUserDelete/request",Ht);case 2:case"end":return e.stop()}},Et)}var Wt={messageData:null,messageSendStatus:"resolved",isSendMessage:!1,isDisabled:!1,messageGetStatus:"idle",isSendMessageYourself:!1,lastMessagesData:null};var Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"messageSendRequest/buttonIsDisabled":return Object(P.a)(Object(P.a)({},e),{},{isDisabled:!0});case"messageSendRequest/resolved":return Object(P.a)(Object(P.a)({},e),{},{messageSendStatus:"resolved",isSendMessage:!0});case"messageSendRequest/yourself":return Object(P.a)(Object(P.a)({},e),{},{isSendMessageYourself:!0});case"messageSendRequest/rejected":return Object(P.a)(Object(P.a)({},e),{},{messageSendStatus:"rejected",isDisabled:!1});case"messageSendRequest/info":return Object(P.a)(Object(P.a)({},e),{},{isSendMessageYourself:!1,isSendMessage:!1,isDisabled:!1});case"messageGetRequest/resolved":return Object(P.a)(Object(P.a)({},e),{},{messageGetStatus:"resolved",messageData:t.payload});case"messageGetRequest/rejected":return Object(P.a)(Object(P.a)({},e),{},{messageGetStatus:"rejected"});case"messageGetRequest/pending":return Object(P.a)(Object(P.a)({},e),{},{messageGetStatus:"searching"});case"lastMessages/array":return Object(P.a)(Object(P.a)({},e),{},{lastMessagesData:t.payload});case"cancelMessageGet/request":return Object(P.a)(Object(P.a)({},e),Wt);default:return e}},$t=function(e){return e.messages.messageData},ea=function(e){return e.messages.lastMessagesData};function ta(){var e=Object(w.a)(["\n  query MessagesFind($query: String) {\n    MessageCount(query: $query) \n    MessageFind(query: $query) {\n      _id\n      owner {\n        _id\n        login\n        nick\n        avatar {\n          url\n        }\n      }\n      createdAt\n      to {\n        _id\n        login\n        nick\n        avatar {\n          url\n        }\n      }\n      text\n    }\n  }\n"]);return ta=function(){return e},e}var aa=E.a.mark(ga),na=E.a.mark(fa),ra=E.a.mark(ba),sa=E.a.mark(va),ca=E.a.mark(ja),la=E.a.mark(wa),oa=E.a.mark(ka),ia=E.a.mark(Sa);function ua(){var e=Object(w.a)(["\n  mutation addNewMessage($to: UserInput $text: String) {\n    MessageUpsert(message: {\n      to: $to,\n      text: $text,\n    }) {\n      _id\n    }\n  }\n"]);return ua=function(){return e},e}var ma=Object(d.gql)(ua());function da(e){return pa.apply(this,arguments)}function pa(){return(pa=Object(x.a)(E.a.mark(function e(t){var a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.request(ma,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ga(e){var t,a;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.e)({type:"messageSendRequest/buttonIsDisabled"});case 2:return n.prev=2,n.next=5,Object(Te.b)(da,e.payload);case 5:return t=n.sent,a=t.MessageUpsert,console.log("MessageUpsert",a),n.next=10,Object(Te.e)({type:"messageSendRequest/resolved"});case 10:return n.next=12,Object(Te.d)(1e3);case 12:return n.next=14,Object(Te.e)({type:"messageSendRequest/info"});case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(2),n.next=20,Object(Te.e)({type:"messageSendRequest/rejected"});case 20:case"end":return n.stop()}},aa,null,[[2,16]])}function fa(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("messageSend/request",ga);case 2:case"end":return e.stop()}},na)}function ba(e){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.e)({type:"messageSendRequest/buttonIsDisabled"});case 2:return e.next=4,Object(Te.e)({type:"messageSendRequest/yourself"});case 4:return e.next=6,Object(Te.d)(1e3);case 6:return e.next=8,Object(Te.e)({type:"messageSendRequest/info"});case 8:case"end":return e.stop()}},ra)}function va(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("messageSend/yourself",ba);case 2:case"end":return e.stop()}},sa)}var ya=Object(d.gql)(ta());function ha(e,t){return Ea.apply(this,arguments)}function Ea(){return(Ea=Object(x.a)(E.a.mark(function e(t,a){var n,r,s,c,l=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,r=[],e.next=4,b.request(ya,{query:JSON.stringify([{$or:[{___owner:t},{"to._id":{$eq:t}}]},{sort:[{_id:Number(a)}],skip:[n]}])});case 4:if(s=e.sent,r.push(s.MessageFind),!(s.MessageCount>100)){e.next=12;break}return n+=100,e.next=10,ha(t,a,n);case 10:c=e.sent,r.push(c);case 12:return s=r.flat(),console.log("data",s),e.abrupt("return",s);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xa=function e(t,a){if(0===t.length)return null;var n=[],r=t.filter(function(e){return t[0].owner._id===a?e.owner._id!==t[0].to._id:e.owner._id!==t[0].owner._id}).filter(function(e){return t[0].owner._id===a?e.to._id!==t[0].to._id:e.to._id!==t[0].owner._id});if(console.log("tempArray",r),0!==r.length){var s=e(r,a);n.push.apply(n,Object(L.a)(s))}return n.push(t[0]),n};function ja(e){var t,a,n,r,s,c,l;return E.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(Te.f)($t);case 3:return t=o.sent,o.next=6,Object(Te.f)(ea);case 6:if(a=o.sent,null!==t){o.next=33;break}return o.next=10,Object(Te.e)({type:"messageGetRequest/pending"});case 10:return o.prev=10,o.next=13,Object(Te.b)(ha,e.payload,-1);case 13:return n=o.sent,console.log("MessageFind",n),o.next=17,Object(Te.e)({type:"messageGetRequest/resolved",payload:n});case 17:return o.next=19,Object(Te.b)(xa,n,e.payload);case 19:return r=o.sent,o.next=22,Object(Te.e)({type:"lastMessages/array",payload:r});case 22:return console.log("LastMessages",r),o.next=25,Object(Te.d)(2e3);case 25:o.next=31;break;case 27:return o.prev=27,o.t0=o.catch(10),o.next=31,Object(Te.e)({type:"messageGetRequest/rejected"});case 31:o.next=57;break;case 33:return o.prev=33,o.next=36,Object(Te.b)(ha,e.payload,1,t.length);case 36:if(s=o.sent,console.log("messageFind",s),0===s.length){o.next=49;break}return o.next=41,Object(Te.e)({type:"messageGetRequest/resolved",payload:s.concat(t)});case 41:return c=s.concat(a.reverse()),console.log("arrLastMessages",c),o.next=45,Object(Te.b)(xa,c,e.payload);case 45:return l=o.sent,console.log("lastMessages",l),o.next=49,Object(Te.e)({type:"lastMessages/array",payload:l});case 49:return o.next=51,Object(Te.d)(2e3);case 51:o.next=57;break;case 53:return o.prev=53,o.t1=o.catch(33),o.next=57,Object(Te.e)({type:"messageGetRequest/rejected"});case 57:o.next=0;break;case 59:case"end":return o.stop()}},ca,null,[[10,27],[33,53]])}function wa(){var e,t;return E.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(Te.h)("messageGet/request",ja);case 3:return e=a.sent,console.log("task",e),a.next=7,Object(Te.g)("cancelMessageGet/request");case 7:return t=a.sent,console.log("action",t),a.next=11,Object(Te.c)(e);case 11:console.log("canceled",e.isCancelled()),a.next=0;break;case 14:case"end":return a.stop()}},la)}function Na(e,t){return Oa.apply(this,arguments)}function Oa(){return(Oa=Object(x.a)(E.a.mark(function e(t,a){var n,r,s,c,l=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,r=[],e.next=4,b.request(ya,{query:JSON.stringify([{$or:[{___owner:t,"to._id":{$eq:a}},{___owner:a,"to._id":{$eq:t}}]},{sort:[{_id:1}],skip:[n]}])});case 4:if(s=e.sent,r.push(s.MessageFind),!(s.MessageCount>100)){e.next=13;break}return n+=100,e.next=10,ha(t,n);case 10:c=e.sent,console.log("res",c),r.push(c);case 13:return s=r.flat(),console.log("data",s),e.abrupt("return",s);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ka(e){var t,a,n;return E.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(Te.f)($t);case 3:if(null!==(t=r.sent)){r.next=24;break}return r.next=7,Object(Te.e)({type:"messageGetRequest/pending"});case 7:return r.prev=7,r.next=10,Object(Te.b)(Na,e.payload.id,e.payload._id);case 10:return a=r.sent,console.log("MessageFind",a),r.next=14,Object(Te.e)({type:"messageGetRequest/resolved",payload:a});case 14:return r.next=16,Object(Te.d)(2e3);case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(7),r.next=22,Object(Te.e)({type:"messageGetRequest/rejected"});case 22:r.next=40;break;case 24:return r.prev=24,r.next=27,Object(Te.b)(Na,e.payload.id,e.payload._id,t.length);case 27:if(n=r.sent,console.log("LastMessageFind",n),0===n.length){r.next=32;break}return r.next=32,Object(Te.e)({type:"messageGetRequest/resolved",payload:t.concat(n)});case 32:return r.next=34,Object(Te.d)(2e3);case 34:r.next=40;break;case 36:return r.prev=36,r.t1=r.catch(24),r.next=40,Object(Te.e)({type:"messageGetRequest/rejected"});case 40:r.next=0;break;case 42:case"end":return r.stop()}},oa,null,[[7,18],[24,36]])}function Sa(){var e,t;return E.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(Te.h)("oneUserMessageGet/request",ka);case 3:return e=a.sent,console.log("task",e),a.next=7,Object(Te.g)("cancelMessageGet/request");case 7:return t=a.sent,console.log("action",t),a.next=11,Object(Te.c)(e);case 11:console.log("canceled",e.isCancelled()),a.next=0;break;case 14:case"end":return a.stop()}},ia)}var Aa={arrImages:[],status:"idle"};var qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"request/pending":return Object(P.a)(Object(P.a)({},e),{},{status:"searching"});case"request/resolved":return Object(P.a)(Object(P.a)({},e),{},{status:"resolved"});case"request/rejected":return Object(P.a)(Object(P.a)({},e),{},{status:"rejected"});case"request/finding":return Object(P.a)(Object(P.a)({},e),{},{status:"idle"});case"arrImages/formed":return Object(P.a)(Object(P.a)({},e),{},{arrImages:t.payload});case"request/reset":return Object(P.a)(Object(P.a)({},e),Aa);default:return e}},Ca=function(e){return e.images.arrImages},Da=function(e){return e.auth.token},Ia=E.a.mark(Ua),Fa=E.a.mark(_a);function Ma(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=Object(x.a)(E.a.mark(function e(t,a){var n,r,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("photo",t),console.log("file",t),e.next=5,fetch("http://marketplace.asmer.fs.a-level.com.ua/upload",{method:"POST",headers:a?{Authorization:"Bearer "+a}:{},body:n});case 5:return r=e.sent,console.log("imageJson",r),e.next=9,r.json();case 9:return s=e.sent,console.log("imageDataFetch",s),e.abrupt("return",s);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ua(e){var t,a,n,r,s;return E.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Te.e)({type:"request/pending"});case 2:return c.next=4,Object(Te.f)(Da);case 4:t=c.sent,a=e.payload,n=0;case 7:if(!(n<a.length)){c.next=31;break}return c.prev=8,c.next=11,Object(Te.f)(Ca);case 11:return r=c.sent,console.log("arrImagesSaga",r),c.next=15,Object(Te.b)(Ma,a[n],t);case 15:return s=c.sent,console.log("imageData",s),c.next=19,Object(Te.e)({type:"arrImages/formed",payload:r.concat(s)});case 19:if(n!==a.length-1){c.next=22;break}return c.next=22,Object(Te.e)({type:"request/finding"});case 22:c.next=28;break;case 24:return c.prev=24,c.t0=c.catch(8),c.next=28,Object(Te.e)({type:"request/rejected"});case 28:n++,c.next=7;break;case 31:case"end":return c.stop()}},Ia,null,[[8,24]])}function _a(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.h)("getArrImages/request",Ua);case 2:case"end":return e.stop()}},Fa)}var za=Object(Ge.c)({auth:Be,ads:mt,messages:Zt,images:qa}),Ga=E.a.mark(Ya);function Ya(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([nt(),ct(),it(),Mt(),Jt(),Xt(),va(),fa(),wa(),Sa(),_a()]);case 2:case"end":return e.stop()}},Ga)}var Ra=Ya,Ba=Object(Ye.a)(),Ta=Object(Ge.e)(za,Object(Ge.a)(Ba));Ba.run(Ra);var La=Ta;c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:La},r.a.createElement(ze,null))),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b30b020d.chunk.js.map